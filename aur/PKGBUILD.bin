# Maintainer: mazix <mazix@bk.ru>
pkgname=perplexity-bin
pkgver=1.1.3
pkgrel=1
pkgdesc="AI-powered search and discovery platform (binary package)"
arch=('x86_64')
url="https://github.com/mazix/perplexity"
license=('Apache-2.0')
conflicts=('perplexity')
provides=('perplexity')
depends=('gtk3' 'nss' 'alsa-lib')

# GitHub release URL for the binary package
source=("https://github.com/mazix/perplexity/releases/download/v${pkgver}/perplexity-${pkgver}-1-x86_64.pkg.tar.zst")
sha256sums=('SKIP')
noextract=("perplexity-${pkgver}-1-x86_64.pkg.tar.zst")

package() {
    # Extract the binary package using bsdtar
    cd "$srcdir"
    
    # Extract the .pkg.tar.zst file directly to pkgdir
    # This preserves the complete directory structure
    bsdtar -xf "perplexity-${pkgver}-1-x86_64.pkg.tar.zst" -C "$pkgdir"
}